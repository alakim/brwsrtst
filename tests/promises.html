<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<link rel="stylesheet" href="../lib/test.css"/>
<script src="../lib/jquery-3.1.1.min.js"></script>
<script src="../lib/html.js"></script>
<script>
'use strict';
$(function(){
	var errors = [];
	////////////////////////////////////////////////////////////////////
	

	let promise = new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve("result");
		}, 100);
	});

	promise
		.then(
			result => {
				if(result!='result') errors.push('Error 1.1');
			},
			error => {
				errors.push('Error 1.2');
			}
		);
	
	
	////////////////////////////////////////////////////////////////////
	
	setTimeout(function(){
		if(errors.length){
			$('body').addClass('error');
			$('body').append(Html.div(
				Html.apply(errors, function(msg){
					return Html.p(msg);
				})
			));
		}
		else
			$('body').addClass('success');
	}, 300);
});
</script>
</head>
<body>
	<p>Promises</p>
</body>
</html>

